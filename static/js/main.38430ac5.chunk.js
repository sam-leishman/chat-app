(this["webpackJsonpchat-app"]=this["webpackJsonpchat-app"]||[]).push([[0],{57:function(e,t,n){},58:function(e,t,n){},72:function(e,t,n){"use strict";n.r(t);var c=n(2),a=n(3),s=n.n(a),i=n(28),r=n.n(i),l=(n(57),n(41)),o=(n(58),n(31));o.a.initializeApp({apiKey:"AIzaSyBZis4GrO4npwU7Vl4-NbsFdjqsNXQNzrc",authDomain:"spiffy-chat-app.firebaseapp.com",projectId:"spiffy-chat-app",storageBucket:"spiffy-chat-app.appspot.com",messagingSenderId:"915849283049",appId:"1:915849283049:web:ee555eac17266ba83ff778",measurementId:"G-BCVXZEJNEY"});var j=o.a.auth,u=(o.a.firestore(),n(12)),h=n(13),b=n(15),d=n(14),p=n(23),O=n(7),m=n(48),f=n(74);var v=Object(m.a)((function(e,t){if("ADD_MESSAGE"===t.type){var n={text:t.text,timestamp:t.time,id:Object(f.a)()},c=e.channels.findIndex((function(e){return e.id===t.channelId})),a=e.channels[c],s=Object(O.a)(Object(O.a)({},a),{},{messages:a.messages.concat(n)});return Object(O.a)(Object(O.a)({},e),{},{channels:[].concat(Object(p.a)(e.channels.slice(0,c)),[s],Object(p.a)(e.channels.slice(c+1,e.channels.length)))})}if("DELETE_MESSAGE"===t.type){var i=e.channels.findIndex((function(e){return e.messages.find((function(e){return e.id===t.id}))})),r=e.channels[i],l=Object(O.a)(Object(O.a)({},r),{},{messages:r.messages.filter((function(e){return e.id!==t.id}))});return Object(O.a)(Object(O.a)({},e),{},{channels:[].concat(Object(p.a)(e.channels.slice(0,i)),[l],Object(p.a)(e.channels.slice(i+1,e.channels.length)))})}if("OPEN_CHANNEL"===t.type)return Object(O.a)(Object(O.a)({},e),{},{currentChannelId:t.id});if("ADD_CHANNEL"===t.type){var o={id:Object(f.a)(),title:t.title,messages:[]};return Object(O.a)(Object(O.a)({},e),{},{channels:[].concat(Object(p.a)(e.channels),[o])})}return"DELETE_CHANNEL"===t.type?Object(O.a)(Object(O.a)({},e),{},{channels:Object(p.a)(e.channels.filter((function(e){return e.id!==t.id})))}):e}),{currentChannelId:"1-fca2",channels:[{id:"1-fca2",title:"general",messages:[]},{id:"2-be91",title:"classroom-channel",messages:[]}]}),x=function(e){Object(b.a)(n,e);var t=Object(d.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){var e=this.props.channelTabs.map((function(e){if(e.active)return e.title}));return Object(c.jsx)("div",{children:Object(c.jsx)("h2",{className:"channel-name",children:e})})}}]),n}(a.Component),g=n(50),N=function(e){Object(b.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(u.a)(this,n);for(var c=arguments.length,a=new Array(c),s=0;s<c;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={value:""},e.scrollToBottom=function(){g.animateScroll.scrollToBottom({containerId:"message-overflow"})},e.onChange=function(t){e.setState({value:t.target.value})},e.handleSubmit=function(t){if(t.preventDefault(),""!==e.state.value){var n="";n="",function(){var e=new Date,t=e.getHours(),c=e.getMinutes(),a="";t>11?(t>12&&(t-=12),a="PM"):t<12&&(a="AM");var s="";c<10&&(s=0),n="".concat(t,":").concat(s).concat(c," ").concat(a)}(),v.dispatch({type:"ADD_MESSAGE",text:e.state.value,time:n,channelId:e.props.channelId}),e.setState({value:""},e.scrollToBottom)}},e}return Object(h.a)(n,[{key:"render",value:function(){return Object(c.jsxs)("div",{className:"input-form",children:[Object(c.jsx)("form",{onSubmit:this.handleSubmit,children:Object(c.jsx)("input",{onChange:this.onChange,value:this.state.value,type:"text",placeholder:"Send a message!",maxLength:300})}),Object(c.jsx)("button",{onClick:this.handleSubmit,className:"submit-button btn",type:"submit",children:Object(c.jsx)("i",{className:"fas fa-arrow-up"})})]})}}]),n}(a.Component),y=function(e){Object(b.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(u.a)(this,n);for(var c=arguments.length,a=new Array(c),s=0;s<c;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).handleClick=function(e){v.dispatch({type:"DELETE_MESSAGE",id:e})},e}return Object(h.a)(n,[{key:"render",value:function(){var e=this,t=this.props.user;if(void 0===this.props.channel)return Object(c.jsx)("div",{children:Object(c.jsx)("h3",{className:"no-channel",children:"Please select or create a channel"})});var n=this.props.channel.messages.map((function(n,a){return Object(c.jsxs)("div",{className:"message-wrapper",children:[Object(c.jsx)("img",{className:"profile-pic-icon",src:t.photoURL,alt:"profile"}),Object(c.jsxs)("div",{className:"message flex",children:[n.text,Object(c.jsxs)("div",{children:[Object(c.jsx)("span",{className:"timestamp flex",children:n.timestamp}),Object(c.jsx)("button",{className:"btn",onClick:function(){return e.handleClick(n.id)},children:Object(c.jsx)("i",{className:"fas fa-trash trash-button"})})]})]})]},a)}));return Object(c.jsxs)("div",{className:"component-with-input",children:[Object(c.jsx)("div",{id:"message-overflow",children:n}),Object(c.jsx)("div",{children:Object(c.jsx)(N,{channelId:this.props.channel.id})})]})}}]),n}(a.Component),C=function(e){Object(b.a)(n,e);var t=Object(d.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){return Object(c.jsx)("div",{className:"server-name",children:Object(c.jsx)("h4",{children:"MTECH-WebDev"})})}}]),n}(a.Component),E=function(e){Object(b.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(u.a)(this,n);for(var c=arguments.length,a=new Array(c),s=0;s<c;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={value:""},e.onChange=function(t){e.setState({value:t.target.value})},e.handleSubmit=function(t){t.preventDefault(),""!==e.state.value&&(v.dispatch({type:"ADD_CHANNEL",title:e.state.value}),e.setState({value:""}))},e}return Object(h.a)(n,[{key:"render",value:function(){return Object(c.jsxs)("div",{className:"input-form",children:[Object(c.jsx)("form",{onSubmit:this.handleSubmit,children:Object(c.jsx)("input",{onChange:this.onChange,value:this.state.value,type:"text",className:"channel-submit-input",placeholder:"New channel",maxLength:30})}),Object(c.jsx)("button",{onClick:this.handleSubmit,className:"submit-button btn",type:"submit",children:Object(c.jsx)("i",{className:"fas fa-plus"})})]})}}]),n}(a.Component),S=function(e){Object(b.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(u.a)(this,n);for(var c=arguments.length,a=new Array(c),s=0;s<c;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).handleClick=function(e){v.dispatch({type:"OPEN_CHANNEL",id:e})},e.handleDelete=function(e,t){e.stopPropagation(),v.dispatch({type:"DELETE_CHANNEL",id:t})},e}return Object(h.a)(n,[{key:"render",value:function(){var e=this,t=this.props.channelTabs.map((function(t,n){return Object(c.jsxs)("div",{className:t.active?"currentTab":"tab",onClick:function(){return e.handleClick(t.id)},children:[t.title,Object(c.jsx)("button",{className:"btn",onClick:function(n){return e.handleDelete(n,t.id)},children:Object(c.jsx)("i",{className:"fas fa-times"})})]},n)}));return Object(c.jsxs)("div",{className:"component-with-input",children:[Object(c.jsxs)("div",{children:[Object(c.jsx)("h5",{children:"Channels"}),t]}),Object(c.jsx)("div",{children:Object(c.jsx)(E,{})})]})}}]),n}(a.Component),k=function(e){Object(b.a)(n,e);var t=Object(d.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=this;v.subscribe((function(){return e.forceUpdate()}))}},{key:"render",value:function(){var e=v.getState(),t=e.currentChannelId,n=e.channels,a=n.find((function(e){return e.id===t})),s=n.map((function(e){return{title:e.title,active:e.id===t,id:e.id}})),i=this.props.user;return Object(c.jsxs)("div",{className:"container-fluid",children:[Object(c.jsxs)("div",{className:"row no-gutters header",children:[Object(c.jsx)("header",{className:"server-name col-3 col-lg-2",children:Object(c.jsx)(C,{})}),Object(c.jsx)("header",{className:"channel-header col-9 col-lg-10",children:Object(c.jsx)(x,{channelTabs:s})})]}),Object(c.jsxs)("div",{className:"main-page row no-gutters",children:[Object(c.jsx)("div",{className:"channels col-3 col-lg-2",children:Object(c.jsx)(S,{channelTabs:s})}),Object(c.jsx)("div",{className:"messages-box col-9 col-lg-10",children:Object(c.jsx)(y,{channel:a,user:i})})]})]})}}]),n}(a.Component);function A(){return j().signOut()}var w=function(e){Object(b.a)(n,e);var t=Object(d.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){return Object(c.jsxs)("div",{className:"login",children:[Object(c.jsx)("h1",{className:"website-name",children:"Spiffy"}),Object(c.jsx)("h3",{className:"text-center",children:"Login"}),Object(c.jsx)("button",{className:"sign-in",onClick:function(){return function(){var e=new j.GoogleAuthProvider;return j().signInWithPopup(e)}()},children:"Login with Google"})]})}}]),n}(a.Component),D=function(e){return Object(c.jsxs)("div",{className:"container-fluid profile-page",children:[Object(c.jsxs)("div",{className:"user-info",children:[Object(c.jsxs)("div",{children:[Object(c.jsx)("h1",{className:"username",children:e.user.displayName}),Object(c.jsx)("p",{className:"timestamp",children:e.user.email})]}),Object(c.jsx)("img",{className:"profile-pic",src:e.user.photoURL,alt:"profile"})]}),Object(c.jsxs)("button",{className:"btn",onClick:A,children:["Sign out ",Object(c.jsx)("i",{className:"fas fa-sign-out-alt"})]})]})},I=function(){return Object(c.jsx)("div",{children:"PublicPage"})},L=n(30),T=n(9),P=function(e){var t=e.component,n=e.authenticated,a=Object(L.a)(e,["component","authenticated"]);return console.log(n),Object(c.jsx)(T.b,Object(O.a)(Object(O.a)({},a),{},{render:function(e){return n?Object(c.jsx)(t,Object(O.a)(Object(O.a)({},e),a)):Object(c.jsx)(T.a,{to:"/login"})}}))},M=function(e){var t=e.component,n=(e.authenticated,Object(L.a)(e,["component","authenticated"]));return Object(c.jsx)(T.b,Object(O.a)(Object(O.a)({},n),{},{render:function(e){return Object(c.jsx)(t,Object(O.a)({},e))}}))},_=n(20),B=function(){return Object(c.jsxs)("div",{className:"signed-in",children:[Object(c.jsx)("h3",{children:"Where would you like to go?"}),Object(c.jsx)(_.b,{to:"/",className:"link-buttons",children:"Chat"}),Object(c.jsx)(_.b,{to:"/profile",className:"link-buttons",children:"Profile"})]})},G=function(){var e=Object(a.useState)(!1),t=Object(l.a)(e,2),n=t[0],s=t[1],i=Object(a.useState)(null),r=Object(l.a)(i,2),o=r[0],u=r[1];return Object(a.useEffect)((function(){j().onAuthStateChanged((function(e){e?(s(!0),u(e)):(s(!1),u(null))}))}),[]),console.log("App.js: "+n),Object(c.jsx)(_.a,{basename:"/chat-app",children:Object(c.jsxs)("div",{children:[Object(c.jsxs)("div",{className:"navbar",children:[Object(c.jsx)(_.b,{className:"link",to:"/",children:"Chat"}),Object(c.jsx)("h5",{className:"header-website-name",children:n?"Spiffy":""}),Object(c.jsxs)(_.b,{className:"link",to:"/profile",children:[n?"Profile":"Not signed in"," ",Object(c.jsx)("i",{className:"fas fa-user-circle"})]})]}),Object(c.jsxs)(T.d,{children:[Object(c.jsx)(P,{exact:!0,path:"/",authenticated:n,user:o,component:k}),n?Object(c.jsx)(T.b,{path:"/login",component:B}):Object(c.jsx)(T.b,{path:"/login",component:w}),Object(c.jsx)(M,{authenticated:n,path:"/public",component:I}),Object(c.jsx)(P,{authenticated:n,user:o,path:"/profile",component:D}),Object(c.jsx)(T.b,{path:"/#"})]})]})})},H=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,75)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,s=t.getLCP,i=t.getTTFB;n(e),c(e),a(e),s(e),i(e)}))};r.a.render(Object(c.jsx)(s.a.StrictMode,{children:Object(c.jsx)(G,{})}),document.getElementById("root")),H()}},[[72,1,2]]]);
//# sourceMappingURL=main.38430ac5.chunk.js.map